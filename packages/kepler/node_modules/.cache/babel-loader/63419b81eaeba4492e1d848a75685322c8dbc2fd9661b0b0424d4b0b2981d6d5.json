{"ast":null,"code":"var _jsxFileName = \"/home/jake/ptolemy/mmod/packages/kepler/src/Kepler.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport \"./Kepler.css\";\nimport * as THREE from \"three\";\nimport { GUI } from \"three/examples/jsm/libs/lil-gui.module.min.js\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GUI_PARAMS = {\n  showHelpers: true,\n  alphaToCoverage: true\n};\nclass MMOD {\n  constructor() {\n    this.mesh = void 0;\n    const geometry = new THREE.SphereGeometry(1, 4, 2);\n    const material = new THREE.MeshPhongMaterial({\n      color: new THREE.Color().setHSL(Math.random(), 0.5, 0.5, THREE.SRGBColorSpace),\n      side: THREE.DoubleSide,\n      alphaToCoverage: true\n    });\n    const mesh = new THREE.Mesh(geometry, material);\n    mesh.position.x = Math.random() * 10 - 5;\n    mesh.position.y = Math.random() * 10 - 5;\n    mesh.position.z = Math.random() * 10 - 5;\n    mesh.scale.x = mesh.scale.y = mesh.scale.z = Math.random() * 3 + 1;\n  }\n}\nfunction Kepler() {\n  _s();\n  // Main components of the three.js nested web GL process.\n  let renderer;\n  let scene;\n  let camera;\n  // Whether or not the three.js canvas renderer and scene have been initialized.\n  // Note that we do not use state here, as we just want to prevent redundant init\n  // calls in useEffect.\n  let initialized = false;\n  const mmods = [];\n  useEffect(init, []);\n  function init() {\n    // Check whether initialized.\n    if (initialized) {\n      return;\n    }\n    initialized = true;\n\n    // Init the three.js WebGLRenderer, which will draw the scene on the canvas.\n    renderer = new THREE.WebGLRenderer({\n      antialias: true\n    });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.localClippingEnabled = true;\n    document.body.appendChild(renderer.domElement);\n\n    // Init scene, which holds objects for rendering.\n    scene = new THREE.Scene();\n\n    // Init camera\n    camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 1, 200);\n    camera.position.set(-1.5, 2.5, 3.0);\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.addEventListener(\"change\", render); // use only if there is no animation loop\n    controls.minDistance = 1;\n    controls.maxDistance = 10;\n    controls.enablePan = false;\n    const light = new THREE.HemisphereLight(0xffffff, 0x080808, 4.5);\n    light.position.set(-1.25, 1, 1.25);\n    scene.add(light);\n\n    // Create an earth sphere around which our MMODs will be orbit.\n    // TODO: Add a transparent slightly larger sphere to illustrate the range of LEO.\n    const earthGroup = new THREE.Group();\n    const earthGeometry = new THREE.SphereGeometry(1, 48, 24);\n    const earthMaterial = new THREE.MeshPhongMaterial({\n      color: new THREE.Color().setHSL(Math.random(), 0.5, 0.5, THREE.SRGBColorSpace),\n      side: THREE.DoubleSide,\n      alphaToCoverage: true\n    });\n    earthGroup.add(new THREE.Mesh(earthGeometry, earthMaterial));\n    // Add the earth group to the scene.\n    scene.add(earthGroup);\n\n    // Init the MMOD meshes, small object points that will be orbiting the\n    // earth sphere.\n    for (let i = 0; i < 500; i++) {\n      const mmod = new MMOD();\n      scene.add(mesh);\n      spheres.push(mesh);\n    }\n    const gui = new GUI();\n    gui.add(GUI_PARAMS, \"alphaToCoverage\").onChange(function (value) {\n      earthGroup.children.forEach(c => {\n        c.material.alphaToCoverage = Boolean(value);\n        c.material.needsUpdate = true;\n      });\n      render();\n    });\n\n    // Add a window event listener that will fire when the browser window is resized.\n    window.addEventListener(\"resize\", onWindowResize);\n  }\n  function onWindowResize() {\n    // Set the ratio of the camera's aspect to match the browser window size.\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    render();\n  }\n  function render() {\n    renderer.render(scene, camera);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"kepler\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 10\n  }, this);\n}\n_s(Kepler, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Kepler;\nexport default Kepler;\nvar _c;\n$RefreshReg$(_c, \"Kepler\");","map":{"version":3,"names":["React","useEffect","THREE","GUI","OrbitControls","jsxDEV","_jsxDEV","GUI_PARAMS","showHelpers","alphaToCoverage","MMOD","constructor","mesh","geometry","SphereGeometry","material","MeshPhongMaterial","color","Color","setHSL","Math","random","SRGBColorSpace","side","DoubleSide","Mesh","position","x","y","z","scale","Kepler","_s","renderer","scene","camera","initialized","mmods","init","WebGLRenderer","antialias","setPixelRatio","window","devicePixelRatio","setSize","innerWidth","innerHeight","localClippingEnabled","document","body","appendChild","domElement","Scene","PerspectiveCamera","set","controls","addEventListener","render","minDistance","maxDistance","enablePan","light","HemisphereLight","add","earthGroup","Group","earthGeometry","earthMaterial","i","mmod","spheres","push","gui","onChange","value","children","forEach","c","Boolean","needsUpdate","onWindowResize","aspect","updateProjectionMatrix","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/jake/ptolemy/mmod/packages/kepler/src/Kepler.tsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport \"./Kepler.css\";\nimport * as THREE from \"three\";\nimport { GUI } from \"three/examples/jsm/libs/lil-gui.module.min.js\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nconst GUI_PARAMS = {\n  showHelpers: true,\n  alphaToCoverage: true,\n};\n\nclass MMOD {\n  public readonly mesh: THREE.Mesh;\n  constructor() {\n    const geometry = new THREE.SphereGeometry(1, 4, 2);\n    const material = new THREE.MeshPhongMaterial({\n      color: new THREE.Color().setHSL(\n        Math.random(),\n        0.5,\n        0.5,\n        THREE.SRGBColorSpace\n      ),\n      side: THREE.DoubleSide,\n      alphaToCoverage: true,\n    });\n    const mesh = new THREE.Mesh(geometry, material);\n    mesh.position.x = Math.random() * 10 - 5;\n    mesh.position.y = Math.random() * 10 - 5;\n    mesh.position.z = Math.random() * 10 - 5;\n    mesh.scale.x = mesh.scale.y = mesh.scale.z = Math.random() * 3 + 1;\n  }\n}\n\nfunction Kepler() {\n  // Main components of the three.js nested web GL process.\n  let renderer: THREE.WebGLRenderer;\n  let scene: THREE.Scene;\n  let camera: THREE.PerspectiveCamera;\n  // Whether or not the three.js canvas renderer and scene have been initialized.\n  // Note that we do not use state here, as we just want to prevent redundant init\n  // calls in useEffect.\n  let initialized = false;\n  const mmods: MMOD[] = [];\n\n  useEffect(init, []);\n\n  function init(): void {\n    // Check whether initialized.\n    if (initialized) {\n      return;\n    }\n    initialized = true;\n\n    // Init the three.js WebGLRenderer, which will draw the scene on the canvas.\n    renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.localClippingEnabled = true;\n    document.body.appendChild(renderer.domElement);\n\n    // Init scene, which holds objects for rendering.\n    scene = new THREE.Scene();\n\n    // Init camera\n    camera = new THREE.PerspectiveCamera(\n      40,\n      window.innerWidth / window.innerHeight,\n      1,\n      200\n    );\n\n    camera.position.set(-1.5, 2.5, 3.0);\n\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.addEventListener(\"change\", render); // use only if there is no animation loop\n    controls.minDistance = 1;\n    controls.maxDistance = 10;\n    controls.enablePan = false;\n\n    const light = new THREE.HemisphereLight(0xffffff, 0x080808, 4.5);\n    light.position.set(-1.25, 1, 1.25);\n    scene.add(light);\n\n    // Create an earth sphere around which our MMODs will be orbit.\n    // TODO: Add a transparent slightly larger sphere to illustrate the range of LEO.\n    const earthGroup = new THREE.Group();\n    const earthGeometry = new THREE.SphereGeometry(1, 48, 24);\n    const earthMaterial = new THREE.MeshPhongMaterial({\n      color: new THREE.Color().setHSL(\n        Math.random(),\n        0.5,\n        0.5,\n        THREE.SRGBColorSpace\n      ),\n      side: THREE.DoubleSide,\n      alphaToCoverage: true,\n    });\n    earthGroup.add(new THREE.Mesh(earthGeometry, earthMaterial));\n    // Add the earth group to the scene.\n    scene.add(earthGroup);\n\n    // Init the MMOD meshes, small object points that will be orbiting the\n    // earth sphere.\n    for (let i = 0; i < 500; i++) {\n      const mmod = new MMOD();\n      scene.add(mesh);\n\n      spheres.push(mesh);\n    }\n\n    const gui = new GUI();\n\n    gui.add(GUI_PARAMS, \"alphaToCoverage\").onChange(function (value) {\n      earthGroup.children.forEach((c: any) => {\n        c.material.alphaToCoverage = Boolean(value);\n        c.material.needsUpdate = true;\n      });\n\n      render();\n    });\n\n    // Add a window event listener that will fire when the browser window is resized.\n    window.addEventListener(\"resize\", onWindowResize);\n  }\n\n  function onWindowResize(): void {\n    // Set the ratio of the camera's aspect to match the browser window size.\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    render();\n  }\n\n  function render(): void {\n    renderer.render(scene, camera);\n  }\n\n  return <div className=\"kepler\"></div>;\n}\n\nexport default Kepler;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}